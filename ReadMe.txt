MultiWalletBalanceTrap ‚Äî —Ü–µ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç-–ª–æ–≤—É—à–∫–∞ –¥–ª—è Drosera
, —è–∫–∞ –≤—ñ–¥—Å—Ç–µ–∂—É—î –±–∞–ª–∞–Ω—Å –∫—ñ–ª—å–∫–æ—Ö –≥–∞–º–∞–Ω—Ü—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, ‚Äú–∫–∏—Ç—ñ–≤‚Äù) —ñ —Å–∏–≥–Ω–∞–ª—ñ–∑—É—î, —è–∫—â–æ –∑–º—ñ–Ω–∞ –ø–µ—Ä–µ–≤–∏—â—É—î –∑–∞–¥–∞–Ω–∏–π –ø–æ—Ä—ñ–≥ (0.01%).

‚ö° –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

‚úÖ –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –≥–∞–º–∞–Ω—Ü—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ

‚úÖ –ü–æ—Ä—ñ–≥ –∑–º—ñ–Ω–∏ –±–∞–ª–∞–Ω—Å—É –≤ –±–∞–∑–∏—Å–Ω–∏—Ö –ø—É–Ω–∫—Ç–∞—Ö (bp)
‚Äî 10 bp = 0.01% (–Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è)

‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∑ –∞–¥—Ä–µ—Å–æ—é —Ç–∞ –≤–µ–ª–∏—á–∏–Ω–æ—é –∑–º—ñ–Ω–∏

‚úÖ –°—É–º—ñ—Å–Ω–∏–π —ñ–∑ Drosera:

collect() ‚Üí –∑–±–∏—Ä–∞—î –¥–∞–Ω—ñ (–±–∞–ª–∞–Ω—Å–∏)

shouldRespond() ‚Üí –ø–æ—Ä—ñ–≤–Ω—é—î –π –≤–∏—Ä—ñ—à—É—î, —á–∏ —Å–∏–≥–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏

üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
my-drosera-trap/
‚îú‚îÄ‚îÄ foundry.toml
‚îú‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ MultiWalletBalanceTrap.sol      # –û—Å–Ω–æ–≤–Ω–∞ –ª–æ–≤—É—à–∫–∞
    ‚îî‚îÄ‚îÄ LogAlertReceiver.sol            # –ö–æ–Ω—Ç—Ä–∞–∫—Ç-–ø—Ä–∏–π–º–∞—á (–ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π)


üõ† –Ø–∫ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏
# 1. –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –ø—Ä–æ—î–∫—Ç Foundry
forge init my-drosera-trap
cd my-drosera-trap

# 2. –ó–∞–º—ñ–Ω—é—î–º–æ –≤–º—ñ—Å—Ç –ø–∞–ø–æ–∫ src/ —ñ test/ –Ω–∞ —Ñ–∞–π–ª–∏ –∑ —Ü—å–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

# 3. –ë—É–¥—É—î–º–æ —ñ —Ç–µ—Å—Ç—É—î–º–æ
forge build


üîó –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ Drosera

–ü—Ä–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—ñ Drosera node, –≤–∫–∞–∂–∏ —Ü—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:

{
  "path": "src/MultiWalletBalanceTrap.sol",
  "response_contract": "<–ê–î–†–ï–°–ê_DEPLOYED_LogAlertReceiver>",
  "response_function": "logAnomaly(address,string,uint256)"
}


–í–ê–ñ–õ–ò–í–û: –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º –∑–∞–º—ñ–Ω–∏ –º–∞—Å–∏–≤ targets —É MultiWalletBalanceTrap.sol –Ω–∞ —Ç—ñ –≥–∞–º–∞–Ω—Ü—ñ, —è–∫—ñ —Ö–æ—á–µ—à –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏.

üß™ –ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—Ç–∏

collect() ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞—Å–∏–≤ –ø–æ—Ç–æ—á–Ω–∏—Ö –±–∞–ª–∞–Ω—Å—ñ–≤ —É—Å—ñ—Ö –≥–∞–º–∞–Ω—Ü—ñ–≤

shouldRespond() ‚Üí –ø–æ—Ä—ñ–≤–Ω—é—î –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º–∏ –¥–∞–Ω–∏–º–∏

–Ø–∫—â–æ –∑–º—ñ–Ω–∞ ‚â• 0.01%, –ø–æ–≤–µ—Ä—Ç–∞—î true —ñ —Ç–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

Drosera –≤–∏–∫–ª–∏–∫–∞—î logAnomaly() –Ω–∞ LogAlertReceiver